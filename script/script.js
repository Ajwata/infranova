const translations = {
    en: {
        nav: {
            home: "Home",
            about: "About Us",
            services: "Services",
            projects: "Projects",
            contact: "Contact"
        },
        hero: {
            badge: "Industry Leader",
            slogan: "Building Complexity. Creating the Future.",
            description: "We don't just build, we create strategic solutions that shape the future and ensure sustainable development.",
            cta: "Our Projects",
            stat1: "Years of Experience",
            stat2: "Successful Projects"
        },
        video: {
            label: "Technologies",
            title: "Innovation in every stage of construction",
            desc: "We use advanced technologies and modern equipment to ensure the highest quality of work. Our approach allows us to optimize processes and reduce project implementation times without loss of quality.",
            feature1: "Modern Equipment",
            feature2: "Environmental Standards",
            feature3: "Quality Control"
        },
        about: {
            title: "About Company",
            subtitle: "Foundation of your development",
            text1: "LLC \"INFRANOVA\" is a leading construction company specializing in the implementation of infrastructure and engineering projects of increased complexity.",
            text2: "Our expertise covers all stages: from the development of innovative concepts to the delivery of \"turnkey\" objects in strict accordance with international quality and safety standards.",
            mission: "Our Mission",
            mission_text: "We strive to be one step ahead in engineering. The main goal of \"Infranova\" is the implementation of innovative solutions in construction, which ultimately guarantees uncompromising quality, reliability and durability of built objects."
        },
        services: {
            title: "Our Services",
            subtitle: "Full cycle of construction works",
            design: {
                title: "Design & Engineering",
                desc: "Comprehensive development of project and technical documentation. Effective coordination of projects with all necessary authorities."
            },
            infrastructure: {
                title: "Critical Infrastructure",
                desc: "Main and local water pipelines, modern boiler houses. Construction of protective structures (bomb shelters, anti-drone protection)."
            },
            municipal: {
                title: "Municipal Objects",
                desc: "Construction of schools, hospitals, kindergartens. Repair and restoration of bridges."
            },
            construction: {
                title: "General Construction",
                desc: "Construction \"from scratch\": from laying the foundation to the erection of target protective objects. Complex repair and reconstruction."
            }
        },
        projects: {
            title: "Our Projects",
            subtitle: "Geography and Partnership",
            desc: "\"Infranova\" works throughout Ukraine, participating in key construction projects in Kyiv, Kharkiv, Dnipro regions and in the Southern region.",
            items: {
                shelter: "Protective Structures",
                bridges: "Bridge Repair",
                water: "Water Pipelines",
                water2: "Engineering Networks"
            }
        },
        contact: {
            title: "Contact Us",
            subtitle: "Trust us with the most complex, and we will build a reliable future.",
            address: "Kyiv, Ukraine",
            phone: "+38 (097) 651-03-89",
            email: "info@infranova.com",
            form: {
                name: "Name",
                email: "Email",
                message: "Message",
                send: "Send Message"
            }
        },
        footer: {
            rights: "© 2025 INFRANOVA. All rights reserved."
        }
    },
    uk: {
        nav: {
            home: "Головна",
            about: "Про нас",
            services: "Послуги",
            projects: "Проєкти",
            contact: "Контакти"
        },
        hero: {
            badge: "Лідер галузі",
            slogan: "Будуємо складне. Створюємо майбутнє.",
            description: "Ми не просто будуємо, ми створюємо стратегічні рішення, які формують майбутнє та забезпечують сталий розвиток.",
            cta: "Наші Проєкти",
            stat1: "Років досвіду",
            stat2: "Успішних проєктів"
        },
        video: {
            label: "Технології",
            title: "Інновації в кожному етапі будівництва",
            desc: "Ми використовуємо передові технології та сучасне обладнання для забезпечення найвищої якості виконання робіт. Наш підхід дозволяє оптимізувати процеси та скоротити терміни реалізації проєктів без втрати якості.",
            feature1: "Сучасна техніка",
            feature2: "Екологічні стандарти",
            feature3: "Контроль якості"
        },
        about: {
            title: "Про Компанію",
            subtitle: "Фундамент вашого розвитку",
            text1: "ТОВ «ІНФРАНОВА» — це провідна будівельна компанія, що спеціалізується на реалізації інфраструктурних та інженерних проєктів підвищеної складності.",
            text2: "Наша експертиза охоплює всі етапи: від розробки інноваційних концепцій до здачі об'єктів \"під ключ\" у суворій відповідності до міжнародних стандартів якості та безпеки.",
            mission: "Наші Цінності та Місія",
            mission_text: "Ми прагнемо бути на крок попереду в інженерії. Головна мета \"Інфранова\" — впровадження інноваційних рішень у будівництві, що в кінцевому результаті гарантує безкомпромісну якість, надійність та довговічність збудованих об'єктів."
        },
        services: {
            title: "Наші Послуги",
            subtitle: "Повний замкнений цикл робіт",
            design: {
                title: "Проєктування та Інженерія",
                desc: "Комплексна розробка проєктної та технічної документації. Ефективне узгодження проєктів з усіма необхідними інстанціями."
            },
            infrastructure: {
                title: "Критична Інфраструктура",
                desc: "Магістральні та локальні водопроводи, сучасні котельні. Будівництво захисних споруд (бомбосховища, протидронний захист)."
            },
            municipal: {
                title: "Муніципальні Об'єкти",
                desc: "Будівництво шкіл, лікарень, дитсадків. Ремонт та відновлення мостів."
            },
            construction: {
                title: "Загальне Будівництво",
                desc: "Будівництво \"з нуля\": від закладки фундаменту до зведення цільових захисних об'єктів. Комплексний ремонт та реконструкція."
            }
        },
        projects: {
            title: "Наші Проєкти",
            subtitle: "Географія та Партнерство",
            desc: "\"Інфранова\" працює по всій Україні, беручи участь у ключових будівельних проєктах у Київській, Харківській, Дніпровській областях та в Південному регіоні.",
            items: {
                shelter: "Захисні Споруди",
                bridges: "Ремонт Мостів",
                water: "Водопроводи",
                water2: "Інженерні Мережі"
            }
        },
        contact: {
            title: "Зв'язатися з нами",
            subtitle: "Довірте нам найскладніше, і ми побудуємо надійне майбутнє.",
            address: "Київ, Україна",
            phone: "+38 (097) 651-03-89",
            email: "info@infranova.com",
            form: {
                name: "Ім'я",
                email: "Email",
                message: "Повідомлення",
                send: "Надіслати"
            }
        },
        footer: {
            rights: "© 2025 ІНФРАНОВА. Всі права захищені."
        }
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Language Switcher
    let currentLang = localStorage.getItem('lang') || 'uk';
    const langBtns = document.querySelectorAll('.lang-btn');
    
    function updateContent(lang) {
        const t = translations[lang];
        
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            const keys = key.split('.');
            let value = t;
            keys.forEach(k => {
                value = value?.[k];
            });
            
            if (value) {
                if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                    el.placeholder = value;
                } else {
                    el.textContent = value;
                }
            }
        });

        langBtns.forEach(btn => {
            btn.querySelector('span').textContent = lang.toUpperCase();
        });

        localStorage.setItem('lang', lang);
        currentLang = lang;
    }

    langBtns.forEach(btn => {
        btn.addEventListener('click', () => {
            const newLang = currentLang === 'uk' ? 'en' : 'uk';
            updateContent(newLang);
        });
    });

    updateContent(currentLang);

    // Mobile Menu
    const mobileToggle = document.querySelector('.mobile-toggle');
    const mobileClose = document.querySelector('.mobile-close');
    const mobileMenu = document.querySelector('.mobile-menu');
    const mobileLinks = document.querySelectorAll('.mobile-menu .nav-link');

    function openMenu(e) {
        e.preventDefault();
        e.stopPropagation();
        mobileMenu.classList.add('active');
        document.body.style.overflow = 'hidden';
        document.body.classList.add('menu-open');
    }

    function closeMenu(e) {
        e.preventDefault();
        e.stopPropagation();
        mobileMenu.classList.remove('active');
        document.body.style.overflow = '';
        document.body.classList.remove('menu-open');
    }

    if (mobileToggle) {
        mobileToggle.addEventListener('click', openMenu);
    }
    
    if (mobileClose) {
        mobileClose.addEventListener('click', closeMenu);
    }

    mobileLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
            document.body.classList.remove('menu-open');
        });
    });

    // Header Scroll Effect
    const header = document.querySelector('header');
    let lastScroll = 0;
    
    window.addEventListener('scroll', () => {
        const currentScroll = window.scrollY;
        
        if (currentScroll > 50) {
            header.classList.add('scrolled');
        } else {
            header.classList.remove('scrolled');
        }
        
        lastScroll = currentScroll;
    });

    // Scroll Animations with Intersection Observer
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };

    const animateOnScroll = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
            }
        });
    }, observerOptions);

    // Add animation classes to elements
    const animateElements = document.querySelectorAll(
        '.section-label, .section-title, .section-title-large, .text-large, .text-medium, ' +
        '.mission-box-modern, .video-wrapper, .video-text-content, .video-features li, ' +
        '.service-card-full, .project-card, .contact-item, .contact-form, ' +
        '.about-text-full > *, .services-header-full'
    );

    animateElements.forEach((el, index) => {
        el.classList.add('animate-on-scroll');
        el.style.transitionDelay = `${(index % 5) * 0.1}s`;
        animateOnScroll.observe(el);
    });

    // Counter Animation for Stats
    const counters = document.querySelectorAll('.stat-num-glass');
    const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const target = entry.target;
                const text = target.textContent;
                const number = parseInt(text);
                
                if (!isNaN(number)) {
                    animateCounter(target, number, text.includes('+'));
                }
                
                counterObserver.unobserve(target);
            }
        });
    }, { threshold: 0.5 });

    counters.forEach(counter => counterObserver.observe(counter));

    function animateCounter(element, target, hasPlus) {
        let current = 0;
        const increment = target / 50;
        const duration = 2000;
        const stepTime = duration / 50;

        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                current = target;
                clearInterval(timer);
            }
            element.textContent = Math.floor(current) + (hasPlus ? '+' : '');
        }, stepTime);
    }

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function(e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Back to top button
    const backToTop = document.createElement('button');
    backToTop.className = 'back-to-top';
    backToTop.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="18 15 12 9 6 15"></polyline>
        </svg>
    `;
    backToTop.setAttribute('aria-label', 'Back to top');
    document.body.appendChild(backToTop);

    window.addEventListener('scroll', () => {
        if (window.scrollY > 500) {
            backToTop.classList.add('visible');
        } else {
            backToTop.classList.remove('visible');
        }
    });

    backToTop.addEventListener('click', () => {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    // Parallax effect for hero
    const heroImage = document.querySelector('.hero-bg-image img');
    if (heroImage) {
        window.addEventListener('scroll', () => {
            const scrolled = window.scrollY;
            if (scrolled < window.innerHeight) {
                heroImage.style.transform = `scale(1.05) translateY(${scrolled * 0.3}px)`;
            }
        });
    }

    // Form submission handling
    const form = document.querySelector('.contact-form form');
    if (form) {
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            
            const btn = form.querySelector('.submit-btn');
            const originalText = btn.innerHTML;
            
            btn.innerHTML = `
                <svg class="animate-spin" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10" stroke-dasharray="32" stroke-dashoffset="32">
                        <animate attributeName="stroke-dashoffset" values="32;0" dur="1s" repeatCount="indefinite"/>
                    </circle>
                </svg>
                <span>Відправка...</span>
            `;
            btn.disabled = true;

            setTimeout(() => {
                btn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    <span>Надіслано!</span>
                `;
                btn.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
                
                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                    btn.disabled = false;
                    form.reset();
                }, 2000);
            }, 1500);
        });
    }

    // Magnetic effect for buttons
    const magneticButtons = document.querySelectorAll('.btn-primary-large, .btn-outline-light-large');
    
    magneticButtons.forEach(btn => {
        btn.addEventListener('mousemove', (e) => {
            const rect = btn.getBoundingClientRect();
            const x = e.clientX - rect.left - rect.width / 2;
            const y = e.clientY - rect.top - rect.height / 2;
            
            btn.style.transform = `translate(${x * 0.1}px, ${y * 0.1}px)`;
        });
        
        btn.addEventListener('mouseleave', () => {
            btn.style.transform = '';
        });
    });

    // Tilt effect for project cards
    const projectCards = document.querySelectorAll('.project-card');
    
    projectCards.forEach(card => {
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = (e.clientX - rect.left) / rect.width;
            const y = (e.clientY - rect.top) / rect.height;
            
            const tiltX = (y - 0.5) * 10;
            const tiltY = (x - 0.5) * -10;
            
            card.style.transform = `perspective(1000px) rotateX(${tiltX}deg) rotateY(${tiltY}deg) translateY(-10px)`;
        });
        
        card.addEventListener('mouseleave', () => {
            card.style.transform = '';
        });
    });

    // Cursor follower for service cards
    const serviceCards = document.querySelectorAll('.service-card-full');
    
    serviceCards.forEach(card => {
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            card.style.setProperty('--mouse-x', `${x}px`);
            card.style.setProperty('--mouse-y', `${y}px`);
        });
    });

    // Loading animation removal
    window.addEventListener('load', () => {
        document.body.classList.add('loaded');
    });

    // Preload critical images
    const criticalImages = [
        'assets/project.jpg',
        'assets/logo.png'
    ];
    
    criticalImages.forEach(src => {
        const img = new Image();
        img.src = src;
    });
});

// Add loaded state CSS
const style = document.createElement('style');
style.textContent = `
    .animate-spin {
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
`;
document.head.appendChild(style);
